---
id: ga1
title: 遺伝的アルゴリズムによるスモコン最適化
author: ikarino
author_title: トルネコ3コンボ廃人
author_url: https://twitter.com/Anchor_Gmkz
author_image_url: https://secure-dcdn.cdn.nimg.jp/nicoaccount/usericon/546/5467394.jpg
tags: []
---
import Iframe from 'react-iframe'
import ComboMap from '../src/components/ComboMap';

[scs](https://github.com/ikarino/nimSCS)と遺伝的アルゴリズムを組み合わせ、スモコンを最適化するこころみです。

<!--truncate-->

## 遺伝的アルゴリズムとは

こちらが比較的面白いです。
<Iframe width="312" height="176" url="https://www.youtube.com/embed/0k-sRwneLeU" />

簡単に言うと、ランダムな初期世代からいい遺伝子だけを残しつて新しい世代を生み出し、最高の遺伝子を作り出すアルゴリズムです。

## 今回のお題

4キラーマスモコンの弱化回数を最適化します。  
今回の場合はそれぞれの弱化回数が遺伝子です。

- ①〜⑦のキラーマの弱化回数を0〜6の間で振り、経験値効率が最大となる組み合わせを求めます。
- 行動順は①〜⑦、巣の順番です。
- キラーマは倍速でLv30です。
- 1500ターンの試行を100回行った平均を比べます。

<ComboMap data={[
    "1111111",
    "1000001",
    "10ホ0001",
    "1①②③④ホ1",
    "1スススス11",
    "1000011",
    "1⑤⑥⑦巣11",
    "1000011"
]} />

絨毯爆撃的にすべての試行を行うと、7の7乗(823543)通りとなります😓  
1ケースあたり10秒だとしても、2288時間かかります。

遺伝的アルゴリズムを用いると、最適解が求まるとは限りませんが、現実的な時間で十分最適と言える解が求まります。

## 計算結果

|世代|弱化パターン|経験値|
|:---:|:---:|:---:|
|1|3, 4, 6, 6, 6, 0, 4|12557|
|2|4, 6, 6, 5, 0, 0, 5|13649|
|3|4, 6, 6, 5, 0, 0, 5|13649|
|4|5, 5, 6, 6, 0, 0, 5|13689|
|5|4, 6, 6, 5, 0, 0, 5|13649|
|6|4, 6, 6, 5, 0, 0, 5|13649|
|7|4, 6, 6, 6, 0, 0, 5|13656|
|8|5, 6, 6, 6, 0, 0, 6|13697|
|9|5, 6, 6, 6, 0, 0, 6|13697|
|10|5, 6, 6, 6, 0, 0, 6|13697|
|11|5, 6, 6, 6, 0, 0, 5|13707|

12世代目以降は11世代目と同じものが勝者となりました。

現行で用いられている形で、処理役を一匹弱化する形が最適なようです。

あたりまえの結果がでてきて残念です笑

## 次の案
### 広げる方向
- 配置を自由にする（これをすると爆発的にパターン数が増えてしまう）
- 壁／空マスを自由にする
- キャラクターを自由にする

### 制限する方向
- 階層ごとの現実的なメンバーに限定する
- 合計弱化回数を制限する
- 育成キャラを固定する
- 使用できるマスの範囲を限定する

## 参考
遺伝的アルゴリズムの実装はPythonライブラリ[DEAP](https://github.com/DEAP/deap)を使用しました。